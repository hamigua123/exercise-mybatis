<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hmg.mybatis.mapper.OrderMapper">

    <select id="getOrderList" resultType="com.hmg.mybatis.pojo.Order">
    select * from `order`
    </select>
    
    <!-- resultMap 入门 -->
    <resultMap type="order" id="order_list_map">
        <!-- 主键用<id>-->
        <id property="id" column="id"/>
        <!-- 普通字段用<result> -->
        <result property="userId" column="user_id"/>
        <result property="number" column="number"/>
        <result property="createtime" column="createtime"/>
        <result property="note" column="note"/>
    </resultMap>
    
    <select id="getOrderListMap" resultMap="order_list_map">
        SELECT `id`,`user_id`,`number`,`createtime`,`note` FROM `order`
    </select>
    
      
    <select id="getOrders" resultType="OrderUser">
        SELECT
            o.`id`,
            o.`user_id` userId,
            o.`number`,
            o.`createtime`,
            o.`note`,
            u.username,
            u.address
        FROM
            `order` o
        LEFT JOIN `user` u 
        ON o.user_id = u.id
    </select>
    
    <resultMap type="Order" id="OrderByResultMap">
        <id column="id" property="id"/>
        <result column="user_id" property="userId"/>
        <result column="number" property="number"/>
        <result column="createtime" property="createtime"/>
        <result column="note" property="note"/>
        
        <!-- association: 一对一配置 -->
        <!-- property: order里面user的属性 -->
        <!-- JavaType: 属性类型 -->
        <association property="user" javaType="com.hmg.mybatis.pojo.User">
            <!-- id: 声明主键 -->
            <id column="user_id" property="id"/>
            <result column="username" property="username"/>
            <result column="address" property="address"/>
            <result column="sex" property="sex"/>
            <result column="birthday" property="birthday"/>
        </association>
    </resultMap>
    <select id="getOrderByResultMap" resultMap="OrderByResultMap">
        SELECT
            o.id,o.user_id,o.number,o.createtime,o.note,u.username,u.birthday,u.address,u.sex
        FROM
            `order` o LEFT JOIN `user` u ON o.user_id = u.id
    </select>
</mapper>
 

 